<h1 class="inline-block text-2xl text-blue-400">一覧</h1>

<h2>検索欄</h2>
<%= render 'search_form', q: @q, url: posts_path %>
<% if @message %>
  <p><%= @message %></p>
<% end %>

<br>
<h2 class="inline-block text-lg text-blue-300">みんなの投稿</h2>
<% @posts.each do |post| %>
    <div class="card bg-blue-50 w-96 border border-gray-300">
      <div class="card-body">
        <p class="text-black text-lg"><%= post.content %></p>
      </div>
    </div>
  </div>
<% end %>
</br>

<br>
<h2 class="inline-block text-lg text-indigo-300">自分の投稿</h2>
<% @user.posts.each do |post| %>
  <div class="post">
    <div class="card bg-violet-50 w-96 border border-gray-300">
      <div class="card-body">
        <p class="text-black text-lg"><%= post.content %></p>
        <button class="btn btn-ghost">
        <%= link_to '編集', user_posts_path(current_user.id, @post) %>
        </button>
      </div>
    </div>
  </div>
<% end %>
</br>


<!-- 投稿用のモーダル -->
<button class="btn" onclick="my_modal_1.showModal()">投稿作成</button>
<dialog id="my_modal_1" class="modal">
  <div class="modal-box">
    <h3 class="text-lg font-bold">投稿作成画面</h3>
    <%= form_with(model: @post, url: user_posts_path(current_user), method: :post) do |f| %>
      <div class="form-group">
        <%= f.text_area :content, class: "form-control", placeholder: "ポスト内容", rows: 5 %>
        <%= f.hidden_field :user_id, value: current_user.id %>
        <%= f.text_field :status, class: "form-control", placeholder: "ステータス" %>
      </div>
      <div class="form-group">
        <%= f.submit "作成", class: "btn" %>
      </div>
    <% end %>
    <div class="modal-action">
      <form method="dialog">
        <button class="btn">Close</button>
      </form>
    </div>
  </div>
</dialog>